import{k as ue,l as se,h as i,o as I,y as $,w as n,b as l,c as re,P as ie,O as de,a as h,v as U,e as d,Q as ce,E as me,r as m}from"./index.3030a0be.js";import{s as p}from"./null.584599c2.js";import{i as pe,T as w,a as q,U as M,b as O,c as j,w as P}from"./index.0f1eddef.js";function fe(o){return p({url:"/user/list",method:"get",params:o})}function ve(o){return p({url:"/user/"+o,method:"get",params:{id:o}})}function ge(o){return p({url:"/user/check",method:"post",data:o})}function _e(o){return p({url:"/user",method:"post",data:o})}function he(o){return p({url:"/user/"+o.id,method:"post",data:o})}function x(o){return p({url:"/user/del/"+o,method:"post",params:{ids:o}})}function be(o){return p({url:"/user/batch",method:"post",data:o})}function ye(){return p({url:"/user/all",method:"get"})}const ke=d("\u641C\u7D22"),Ue=d("\u91CD\u7F6E"),ze=d("\u65B0\u589E\u4EBA\u5458"),Ce=d("\u6279\u91CF\u5220\u9664"),Ve=d("\u8868\u683C\u6A21\u677F"),Ie=d("\u4E0A\u4F20\u8868\u683C"),we=d("\u4E0B\u8F7D\u8868\u683C"),Re={class:"dialog-footer"},Ne=d("\u53D6\u6D88"),Se=d("\u786E\u5B9A"),Te={class:"dialog-footer"},Le=d("\u53D6\u6D88"),Be=d("\u786E\u5B9A"),Fe={name:"User",components:{TableList:q,TableLayout:j,TableImage:w,UploadImage:M,UploadExcel:O}},Pe=Object.assign(Fe,{setup(o){const A=ue();se(()=>{const{prizeId:t}=A.query;t&&(s.value.prizeId=t),c(),G()});const s=i({pageNum:1,pageSize:10,sort:"",name:"",prizeId:""});function Q(){s.value.pageNum=1,c()}function K(){s.value={pageNum:1,pageSize:10,sort:"",name:"",prizeId:""}}const R=i(null),z=i(!1),N=i([]),C=i(0);function c(){z.value=!0,fe(s.value).then(t=>{N.value=t.data.list,C.value=t.data.total,setTimeout(()=>{z.value=!1},1.5*1e3)})}const y=i([]);function G(){pe().then(t=>{y.value=t.data,y.value=y.value.sort((a,g)=>a.number-g.number)})}function S(t){ce.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(t&&t.id)x(t.id).then(a=>{c()});else{const a=R.value.getSelectedRowKeys();x(a.join(",")).then(g=>{c()})}})}const v=i(!1),u=i({id:"",prizeId:"",prizeImage:"",prizeName:"",avatar:"",name:"",desc:"",operateTime:""}),H=i({name:[{required:!0,message:"\u4EBA\u5458\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],desc:[{required:!0,message:"\u4EBA\u5458\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function T(t){u.value={},v.value=!0,t&&t.id&&ve(t.id).then(a=>{u.value=a.data})}function J(){u.value.name&&u.value.desc&&ge(u.value).then(t=>{t.data&&me.error("\u4EBA\u5458\u5DF2\u5B58\u5728")})}function W(t){u.value.avatar=t}const V=i(null);function L(){V.value.resetFields(),v.value=!1,u.value={}}function X(){V.value.validate(t=>{t&&(u.value.id?he(u.value).then(a=>{v.value=!1,c()}):_e(u.value).then(a=>{v.value=!1,c()}))})}const k=i([{field:"name",name:"\u4EBA\u5458\u540D\u79F0"},{field:"desc",name:"\u4EBA\u5458\u63CF\u8FF0"}]);function Y(){P({header:k.value,filename:"\u4EBA\u5458\u7BA1\u7406"})}function Z(){k.value.push({field:"prizeName",name:"\u5956\u54C1\u540D\u79F0"}),ye().then(t=>{const a=t.data;P({data:a,header:k.value,filename:"\u4EBA\u5458\u7BA1\u7406"})})}const b=i(!1);function ee(){b.value=!0}function B(){b.value=!1}const F=i([]);function le(t){F.value=t}function ae(){be(F.value).then(()=>{b.value=!1,c()}).catch(()=>{c()})}return(t,a)=>{const g=m("el-input"),_=m("el-form-item"),te=m("el-option"),ne=m("el-select"),r=m("el-button"),D=m("el-form"),f=m("el-table-column"),E=m("el-dialog");return I(),$(j,{title:"\u4EBA\u5458\u5217\u8868"},{form:n(()=>[l(D,{model:s.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:n(()=>[l(_,{label:"\u4EBA\u5458\u540D\u79F0"},{default:n(()=>[l(g,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u4EBA\u5458\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(_,{label:"\u5956\u54C1\u540D\u79F0"},{default:n(()=>[l(ne,{modelValue:s.value.prizeId,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.prizeId=e),placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u540D\u79F0"},{default:n(()=>[(I(!0),re(de,null,ie(y.value,e=>(I(),$(te,{key:e.id,value:e.id,label:e.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,null,{default:n(()=>[l(r,{type:"primary",icon:t.useRenderIcon("search"),onClick:Q},{default:n(()=>[ke]),_:1},8,["icon"]),l(r,{type:"primary",icon:t.useRenderIcon("refresh-left"),onClick:K},{default:n(()=>[Ue]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:n(()=>[l(r,{type:"primary",icon:t.useRenderIcon("plus"),onClick:a[2]||(a[2]=e=>T())},{default:n(()=>[ze]),_:1},8,["icon"]),l(r,{type:"warning",icon:t.useRenderIcon("delete"),onClick:a[3]||(a[3]=e=>S())},{default:n(()=>[Ce]),_:1},8,["icon"]),l(r,{type:"",icon:t.useRenderIcon("document"),onClick:a[4]||(a[4]=e=>Y())},{default:n(()=>[Ve]),_:1},8,["icon"]),l(r,{type:"",icon:t.useRenderIcon("upload2"),onClick:a[5]||(a[5]=e=>ee())},{default:n(()=>[Ie]),_:1},8,["icon"]),l(r,{type:"",icon:t.useRenderIcon("download"),onClick:a[6]||(a[6]=e=>Z())},{default:n(()=>[we]),_:1},8,["icon"])]),table:n(()=>[l(q,{ref_key:"tableListDom",ref:R,data:N.value,loading:z.value,"show-selection":!0,"show-page":C.value>0,"page-total":C.value,"page-num":s.value.pageNum,"onUpdate:page-num":a[7]||(a[7]=e=>s.value.pageNum=e),"page-size":s.value.pageSize,"onUpdate:page-size":a[8]||(a[8]=e=>s.value.pageSize=e),onPagination:c},{default:n(()=>[l(f,{label:"\u5934\u50CF",align:"center"},{default:n(e=>[l(w,{src:e.row.avatar},null,8,["src"])]),_:1}),l(f,{label:"\u4EBA\u5458\u540D\u79F0",align:"center"},{default:n(e=>[h("span",null,U(e.row.name),1)]),_:1}),l(f,{label:"\u4EBA\u5458\u63CF\u8FF0",align:"center"},{default:n(e=>[h("span",null,U(e.row.desc),1)]),_:1}),l(f,{label:"\u5956\u54C1\u56FE\u7247",align:"center"},{default:n(e=>[l(w,{src:e.row.prizeImage},null,8,["src"])]),_:1}),l(f,{label:"\u5956\u54C1\u540D\u79F0",align:"center"},{default:n(e=>[h("span",null,U(e.row.prizeName),1)]),_:1}),l(f,{label:"\u64CD\u4F5C\u65F6\u95F4",align:"center"},{default:n(e=>[h("span",null,U(e.row.operateTime),1)]),_:1}),l(f,{label:"\u64CD\u4F5C",align:"center",width:"160"},{default:n(e=>[l(r,{type:"primary",size:"small",circle:"",icon:t.useRenderIcon("edit"),onClick:oe=>T(e.row),title:"\u7F16\u8F91"},null,8,["icon","onClick"]),l(r,{type:"danger",size:"small",circle:"",icon:t.useRenderIcon("delete"),onClick:oe=>S(e.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"]),l(E,{title:u.value.id?"\u4FEE\u6539\u4EBA\u5458":"\u65B0\u589E\u4EBA\u5458",modelValue:v.value,"onUpdate:modelValue":a[11]||(a[11]=e=>v.value=e),onClose:L},{footer:n(()=>[h("span",Re,[l(r,{onClick:L},{default:n(()=>[Ne]),_:1}),l(r,{type:"primary",onClick:X},{default:n(()=>[Se]),_:1})])]),default:n(()=>[l(D,{ref_key:"dialogForm",ref:V,model:u.value,rules:H.value,"label-width":"120px","label-suffix":":"},{default:n(()=>[l(_,{label:"\u4EBA\u5458\u5934\u50CF",prop:"avatar"},{default:n(()=>[l(M,{"image-url":u.value.avatar,onUploadPath:W},null,8,["image-url"])]),_:1}),l(_,{label:"\u4EBA\u5458\u540D\u79F0",prop:"name"},{default:n(()=>[l(g,{modelValue:u.value.name,"onUpdate:modelValue":a[9]||(a[9]=e=>u.value.name=e),placeholder:"\u8BF7\u8F93\u5165\u4EBA\u5458\u540D\u79F0",onBlur:J},null,8,["modelValue"])]),_:1}),l(_,{label:"\u4EBA\u5458\u63CF\u8FF0",prop:"desc"},{default:n(()=>[l(g,{modelValue:u.value.desc,"onUpdate:modelValue":a[10]||(a[10]=e=>u.value.desc=e),placeholder:"\u8BF7\u8F93\u5165\u4EBA\u5458\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"]),l(E,{title:"\u5BFC\u5165Excel",modelValue:b.value,"onUpdate:modelValue":a[12]||(a[12]=e=>b.value=e),onClose:B},{footer:n(()=>[h("span",Te,[l(r,{onClick:B},{default:n(()=>[Le]),_:1}),l(r,{type:"primary",onClick:ae},{default:n(()=>[Be]),_:1})])]),default:n(()=>[l(O,{header:k.value,onOnSuccess:le},null,8,["header"])]),_:1},8,["modelValue"])]),_:1})}}});export{Pe as default};
