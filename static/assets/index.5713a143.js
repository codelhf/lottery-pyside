import{f as Q,d as D,a as A,c as G,b as H,u as J}from"./index.ca9c76ac.js";import{T as B,a as L}from"./layout.8d15189f.js";import{K as W,h as y,r as v,o as n,p as C,w as a,b as e,a as f,t as c,c as s,q as i,e as h,N as X,E as Y}from"./index.0b2e016e.js";const Z=h("\u67E5\u8BE2"),ee=h("\u91CD\u7F6E"),le=h("\u65B0\u589E\u4E0A\u4F20\u7B56\u7565"),ae=h("\u6279\u91CF\u5220\u9664"),te={key:0},oe={key:1},ue={key:2},re={key:3},ne={key:4},de={key:5},se={key:6},ie={key:0},pe={key:1},me={key:2},ge={key:3},ve={key:4},fe={key:5},ye={class:"dialog-footer"},ce=h("\u53D6\u6D88"),_e=h("\u786E\u5B9A"),be={name:"Strategy",components:{TableList:B,TableLayout:L}},Re=Object.assign(be,{setup(Ve){W(()=>{b()});const p=y({pageNum:1,pageSize:10,sort:"",parentId:"",parentName:"",name:""});function T(){p.value.pageNum=1,b()}function F(){p.value={pageNum:1,pageSize:10,sort:"",parentId:"",parentName:"",name:""}}const K=y(null),w=y(!1),z=y([]),k=y(0);function b(){w.value=!0,Q(p.value).then(u=>{z.value=u.data.list,k.value=u.data.total,setTimeout(()=>{w.value=!1},1.5*1e3)})}function S(u){X.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(u&&u.id)D(u.id).then(t=>{b()});else{const t=K.value.getSelectedRowKeys();D(t.join(",")).then(m=>{b()})}})}const V=y(!1),o=y({uid:"",strategyid:"",strategystr:"",uploaddir:"",transcodedir:"",transcodeparam:"",transcodeapppath:"",strategytype:"",transcodesuffix:"",videosize:"",videotype:"",audittemplate:""}),E=y({strategyid:[{required:!0,message:"\u7B56\u7565ID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],strategystr:[{required:!0,message:"\u7B56\u7565\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],uploaddir:[{required:!0,message:"\u4E0A\u4F20\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],transcodedir:[{required:!0,message:"\u5904\u7406\u76EE\u5F55\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],transcodeapppath:[{required:!0,message:"\u6267\u884C\u547D\u4EE4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],strategytype:[{required:!0,message:"\u7B56\u7565\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],transcodesuffix:[{required:!0,message:"\u8F93\u51FA\u540E\u7F00\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],videosize:[{required:!0,message:"\u753B\u5E45\u6BD4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],videotype:[{required:!0,message:"\u89C6\u9891\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function x(u){o.value={},V.value=!0,u&&u.uid&&A(u.uid).then(t=>{o.value=t.data})}function M(){o.value.strategystr&&o.value.strategyid&&G(o.value).then(u=>{u.data&&Y.error("\u4E0A\u4F20\u7B56\u7565\u5DF2\u5B58\u5728")})}const R=y(null);function I(){R.value.resetFields(),V.value=!1,o.value={}}function j(){R.value.validate(u=>{u&&(o.value.id?J(o.value).then(t=>{V.value=!1,b()}):H(o.value).then(t=>{V.value=!1,b()}))})}return(u,t)=>{const m=v("el-input"),d=v("el-form-item"),r=v("el-option"),U=v("el-select"),_=v("el-button"),N=v("el-form"),g=v("el-table-column"),q=v("el-col"),$=v("el-row"),O=v("el-dialog");return n(),C(L,{title:"\u4E0A\u4F20\u7B56\u7565\u5217\u8868"},{form:a(()=>[e(N,{model:p.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:a(()=>[e(d,{label:"\u7B56\u7565\u540D\u79F0"},{default:a(()=>[e(m,{modelValue:p.value.strategystr,"onUpdate:modelValue":t[0]||(t[0]=l=>p.value.strategystr=l),placeholder:"\u8BF7\u8F93\u5165\u7B56\u7565\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u7B56\u7565\u7C7B\u578B"},{default:a(()=>[e(U,{modelValue:p.value.strategytype,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value.strategytype=l),placeholder:"\u8BF7\u9009\u62E9\u7B56\u7565\u7C7B\u578B"},{default:a(()=>[e(r,{label:"\u8F6C\u7801",value:0}),e(r,{label:"\u4E0A\u4F20",value:1}),e(r,{label:"\u6280\u5BA1",value:2}),e(r,{label:"VR4K",value:3}),e(r,{label:"VR8K",value:4}),e(r,{label:"VR4K180",value:5}),e(r,{label:"VR8K180",value:6})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(_,{type:"primary",icon:u.useRenderIcon("search"),onClick:T},{default:a(()=>[Z]),_:1},8,["icon"]),e(_,{type:"primary",icon:u.useRenderIcon("refresh-left"),onClick:F},{default:a(()=>[ee]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:a(()=>[e(_,{type:"primary",icon:u.useRenderIcon("plus"),onClick:x},{default:a(()=>[le]),_:1},8,["icon"]),e(_,{type:"warning",icon:u.useRenderIcon("delete"),onClick:S},{default:a(()=>[ae]),_:1},8,["icon"])]),table:a(()=>[e(B,{ref_key:"tableListDom",ref:K,data:z.value,loading:w.value,"show-selection":!0,"show-page":k.value>0,"page-total":k.value,"page-num":p.value.pageNum,"onUpdate:page-num":t[2]||(t[2]=l=>p.value.pageNum=l),"page-size":p.value.pageSize,"onUpdate:page-size":t[3]||(t[3]=l=>p.value.pageSize=l),onPagination:b},{default:a(()=>[e(g,{label:"\u7B56\u7565ID",align:"center"},{default:a(l=>[f("span",null,c(l.row.strategyid),1)]),_:1}),e(g,{label:"\u7B56\u7565\u540D\u79F0",align:"center"},{default:a(l=>[f("span",null,c(l.row.strategystr),1)]),_:1}),e(g,{label:"\u7B56\u7565\u7C7B\u578B",align:"center"},{default:a(l=>[l.row.strategytype===0?(n(),s("span",te,"\u8F6C\u7801")):i("",!0),l.row.strategytype===1?(n(),s("span",oe,"\u4E0A\u4F20")):i("",!0),l.row.strategytype===2?(n(),s("span",ue,"\u6280\u5BA1")):i("",!0),l.row.strategytype===3?(n(),s("span",re,"VR4K")):i("",!0),l.row.strategytype===4?(n(),s("span",ne,"VR8K")):i("",!0),l.row.strategytype===5?(n(),s("span",de,"VR4K180")):i("",!0),l.row.strategytype===6?(n(),s("span",se,"VR8K180")):i("",!0)]),_:1}),e(g,{label:"\u4E0A\u4F20\u76EE\u5F55",align:"center"},{default:a(l=>[f("span",null,c(l.row.uploaddir),1)]),_:1}),e(g,{label:"\u5904\u7406\u76EE\u5F55",align:"center"},{default:a(l=>[f("span",null,c(l.row.transcodedir),1)]),_:1}),e(g,{label:"\u5904\u7406\u53C2\u6570",align:"center",width:"300"},{default:a(l=>[f("span",null,c(l.row.transcodeparam),1)]),_:1}),e(g,{label:"\u6267\u884C\u547D\u4EE4",align:"center"},{default:a(l=>[f("span",null,c(l.row.transcodeapppath),1)]),_:1}),e(g,{label:"\u8F93\u51FA\u540E\u7F00",align:"center"},{default:a(l=>[f("span",null,c(l.row.transcodesuffix),1)]),_:1}),e(g,{label:"\u753B\u5E45\u6BD4",align:"center"},{default:a(l=>[f("span",null,c(l.row.videosize),1)]),_:1}),e(g,{label:"\u89C6\u9891\u7C7B\u578B",align:"center"},{default:a(l=>[l.row.videotype===0?(n(),s("span",ie,"\u89C6\u9891")):i("",!0),l.row.videotype===2?(n(),s("span",pe,"\u97F3\u9891")):i("",!0),l.row.videotype===6?(n(),s("span",me,"\u7AD6\u7248\u89C6\u9891")):i("",!0),l.row.videotype===7?(n(),s("span",ge,"4K\u89C6\u9891")):i("",!0),l.row.videotype===5?(n(),s("span",ve,"VR\u89C6\u9891")):i("",!0),l.row.videotype===8?(n(),s("span",fe,"VR\u89C6\u9891\u5E26\u5B57\u5E55")):i("",!0)]),_:1}),e(g,{label:"\u6280\u5BA1\u6A21\u677F",align:"center"},{default:a(l=>[f("span",null,c(l.row.audittemplate),1)]),_:1}),e(g,{label:"\u64CD\u4F5C",align:"center",width:"160",fixed:"right"},{default:a(l=>[e(_,{type:"primary",size:"small",circle:"",icon:u.useRenderIcon("edit"),onClick:P=>x(l.row),title:"\u7F16\u8F91"},null,8,["icon","onClick"]),e(_,{type:"warning",size:"small",circle:"",icon:u.useRenderIcon("delete"),onClick:P=>S(l.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"]),e(O,{title:o.value.uid?"\u4FEE\u6539\u4E0A\u4F20\u7B56\u7565":"\u65B0\u589E\u4E0A\u4F20\u7B56\u7565",modelValue:V.value,"onUpdate:modelValue":t[16]||(t[16]=l=>V.value=l),onClose:I},{footer:a(()=>[f("span",ye,[e(_,{onClick:I},{default:a(()=>[ce]),_:1}),e(_,{type:"primary",onClick:j},{default:a(()=>[_e]),_:1})])]),default:a(()=>[e(N,{ref_key:"dialogForm",ref:R,model:o.value,rules:E.value,"label-width":"160px","label-suffix":":"},{default:a(()=>[e(d,{label:"\u7B56\u7565ID",prop:"strategyid"},{default:a(()=>[o.value.uid?(n(),C(m,{key:0,disabled:"",modelValue:o.value.strategyid,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.strategyid=l),placeholder:"\u8BF7\u8F93\u5165\u7B56\u7565ID"},null,8,["modelValue"])):(n(),C(m,{key:1,modelValue:o.value.strategyid,"onUpdate:modelValue":t[5]||(t[5]=l=>o.value.strategyid=l),placeholder:"\u8BF7\u8F93\u5165\u7B56\u7565ID"},null,8,["modelValue"]))]),_:1}),e(d,{label:"\u7B56\u7565\u540D\u79F0",prop:"strategystr"},{default:a(()=>[e(m,{modelValue:o.value.strategystr,"onUpdate:modelValue":t[6]||(t[6]=l=>o.value.strategystr=l),placeholder:"\u8BF7\u8F93\u5165\u7B56\u7565\u540D\u79F0",onBlur:M},null,8,["modelValue"])]),_:1}),e(d,{label:"\u4E0A\u4F20\u76EE\u5F55",prop:"uploaddir"},{default:a(()=>[e(m,{modelValue:o.value.uploaddir,"onUpdate:modelValue":t[7]||(t[7]=l=>o.value.uploaddir=l),placeholder:"\u8BF7\u8F93\u5165\u4E0A\u4F20\u76EE\u5F55"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5904\u7406\u76EE\u5F55",prop:"transcodedir"},{default:a(()=>[e(m,{modelValue:o.value.transcodedir,"onUpdate:modelValue":t[8]||(t[8]=l=>o.value.transcodedir=l),placeholder:"\u8BF7\u8F93\u5165\u5904\u7406\u76EE\u5F55"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5904\u7406\u53C2\u6570",prop:"transcodeparam"},{default:a(()=>[e(m,{type:"textarea",modelValue:o.value.transcodeparam,"onUpdate:modelValue":t[9]||(t[9]=l=>o.value.transcodeparam=l),placeholder:"\u8BF7\u8F93\u5165\u5904\u7406\u53C2\u6570"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u6267\u884C\u547D\u4EE4",prop:"transcodeapppath"},{default:a(()=>[e(m,{modelValue:o.value.transcodeapppath,"onUpdate:modelValue":t[10]||(t[10]=l=>o.value.transcodeapppath=l),placeholder:"\u8BF7\u8F93\u5165\u6267\u884C\u547D\u4EE4"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u8F93\u51FA\u540E\u7F00",prop:"transcodesuffix"},{default:a(()=>[e(m,{modelValue:o.value.transcodesuffix,"onUpdate:modelValue":t[11]||(t[11]=l=>o.value.transcodesuffix=l),placeholder:"\u8BF7\u8F93\u5165\u8F93\u51FA\u540E\u7F00"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u753B\u5E45\u6BD4",prop:"videosize"},{default:a(()=>[e(m,{modelValue:o.value.videosize,"onUpdate:modelValue":t[12]||(t[12]=l=>o.value.videosize=l),placeholder:"\u8BF7\u8F93\u5165\u753B\u5E45\u6BD4"},null,8,["modelValue"])]),_:1}),e($,null,{default:a(()=>[e(q,{span:12},{default:a(()=>[e(d,{label:"\u89C6\u9891\u7C7B\u578B",prop:"videotype"},{default:a(()=>[e(U,{modelValue:o.value.videotype,"onUpdate:modelValue":t[13]||(t[13]=l=>o.value.videotype=l),placeholder:"\u8BF7\u9009\u62E9\u89C6\u9891\u7C7B\u578B"},{default:a(()=>[e(r,{label:"\u89C6\u9891",value:0}),e(r,{label:"\u97F3\u9891",value:2}),e(r,{label:"\u7AD6\u7248\u89C6\u9891",value:6}),e(r,{label:"4K\u89C6\u9891",value:7}),e(r,{label:"VR\u89C6\u9891",value:5}),e(r,{label:"VR\u89C6\u9891\u5E26\u5B57\u5E55",value:8})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(q,{span:12},{default:a(()=>[e(d,{label:"\u7B56\u7565\u7C7B\u578B",prop:"strategytype"},{default:a(()=>[e(U,{modelValue:o.value.strategytype,"onUpdate:modelValue":t[14]||(t[14]=l=>o.value.strategytype=l),placeholder:"\u8BF7\u9009\u62E9\u7B56\u7565\u7C7B\u578B"},{default:a(()=>[e(r,{label:"\u8F6C\u7801",value:0}),e(r,{label:"\u4E0A\u4F20",value:1}),e(r,{label:"\u6280\u5BA1",value:2}),e(r,{label:"VR4K",value:3}),e(r,{label:"VR8K",value:4}),e(r,{label:"VR4K180",value:5}),e(r,{label:"VR8K180",value:6})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(d,{label:"\u6280\u5BA1\u6A21\u677F",prop:"audittemplate"},{default:a(()=>[e(m,{modelValue:o.value.audittemplate,"onUpdate:modelValue":t[15]||(t[15]=l=>o.value.audittemplate=l),placeholder:"\u8BF7\u8F93\u5165\u6280\u5BA1\u6A21\u677F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})}}});export{Re as default};
