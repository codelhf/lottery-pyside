import{d as z,h as _,K as T,i as y,_ as $,r as g,o as m,c as h,a as c,b as r,w as u,p as b,q as v,e as N,t as C,O as f,P as w,Q as B,R,M as k,S as L,T as A,n as P}from"./index.0b2e016e.js";Math.easeInOutQuad=function(e,t,n,l){return e/=l/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var q=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function I(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function F(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function S(e,t,n){const l=F(),i=e-l,d=20;let o=0;t=typeof t=="undefined"?500:t;var s=function(){o+=d;var a=Math.easeInOutQuad(o,l,i,t);I(a),o<t?q(s):n&&typeof n=="function"&&n()};s()}const H=z({name:"TableList",props:{data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},selected:{type:Array,default:()=>[]},showIndex:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showPage:{type:Boolean,default:!0},pageTotal:{required:!0,type:Number},pageNum:{type:Number,default:1},pageSize:{type:Number,default:20},pageSizes:{type:Array,default:()=>[10,20,50,100]},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageBackground:{type:Boolean,default:!0},pageAutoScroll:{type:Boolean,default:!0}},setup(e,t){const n=_(null);T(()=>{const a=e.selected&&e.selected.length>0;n.value.toggleRowSelection(e.selected,a)});const l=()=>n.value.getSelectionRows().map(p=>p.id),i=y({get:()=>e.pageNum,set:a=>{t.emit("update:pageNum",a)}}),d=y({get:()=>e.pageSize,set:a=>{t.emit("update:pageSize",a)}});function o(a){t.emit("pagination",{pageNum:a,pageSize:d}),e.autoScroll&&S(0,800,null)}function s(a){t.emit("pagination",{pageNum:i,pageSize:a}),e.autoScroll&&S(0,800,null)}return{tableDom:n,getSelectedRowKeys:l,currentPage:i,pageLimit:d,handleCurrentChange:o,handleSizeChange:s}}}),D={class:"system-table-box"},M={class:"system-page-box"};function V(e,t,n,l,i,d){const o=g("el-table-column"),s=g("el-table"),a=g("el-pagination");return m(),h(k,null,[c("div",D,[r(s,w({ref:"tableDom"},e.$attrs,{class:"system-table",data:e.data,loading:e.loading,"highlight-current-row":"",border:"",height:"100%"}),{default:u(()=>[e.showSelection?(m(),b(o,{key:0,type:"selection",align:"center",width:"50"})):v("",!0),e.showIndex?(m(),b(o,{key:1,label:"\u5E8F\u53F7",width:"60",align:"center"},{default:u(p=>[N(C((e.pageNum-1)*e.pageSize+p.$index+1),1)]),_:1})):v("",!0),f(e.$slots,"default",{},void 0,!0)]),_:3},16,["data","loading"])]),c("div",M,[B(r(a,w({class:"system-page",background:e.pageBackground,"page-sizes":e.pageSizes,"current-page":e.currentPage,"onUpdate:current-page":t[0]||(t[0]=p=>e.currentPage=p),"page-size":e.pageLimit,"onUpdate:page-size":t[1]||(t[1]=p=>e.pageLimit=p),layout:e.pageLayout,total:e.pageTotal},e.$attrs,{onCurrentChange:e.handleCurrentChange,onSizeChange:e.handleSizeChange}),null,16,["background","page-sizes","current-page","page-size","layout","total","onCurrentChange","onSizeChange"]),[[R,e.showPage]])])],64)}var J=$(H,[["render",V],["__scopeId","data-v-6b52f108"]]);const E=z({name:"TableLayout",props:{title:{type:String,default:"\u5217\u8868"}},setup(e,t){const n=L(),l=y(()=>!!n.tree),i=_(null),d=_("--formHeight: 68px");return T(()=>{d.value=`--formHeight: ${i.value.offsetHeight+48}px`}),{hasTree:l,formRef:i,formHeight:d}}}),O={class:"layout-container"},Q={class:"layout-container-tree"},K={key:0,class:"tree-left"},U={class:"layout-container-form",ref:"formRef"};function j(e,t,n,l,i,d){const o=g("el-col"),s=g("el-row"),a=g("el-button-group");return m(),h("div",O,[c("div",Q,[e.hasTree?(m(),h("div",K,[f(e.$slots,"tree",{},void 0,!0)])):v("",!0)]),c("div",{class:P(["layout-container-right",{"has-tree":e.hasTree}])},[c("div",U,[r(s,null,{default:u(()=>[r(o,{span:24},{default:u(()=>[f(e.$slots,"form",{},void 0,!0)]),_:3})]),_:3})],512),c("div",{class:"layout-container-table",ref:"tableRef",style:A(e.formHeight)},[r(s,{class:"title"},{default:u(()=>[r(o,{span:12},{default:u(()=>[c("h3",null,C(e.title),1)]),_:1}),r(o,{span:12},{default:u(()=>[r(a,null,{default:u(()=>[f(e.$slots,"button",{},void 0,!0)]),_:3})]),_:3})]),_:3}),r(s,{class:"table"},{default:u(()=>[r(o,{span:24},{default:u(()=>[f(e.$slots,"table",{},void 0,!0)]),_:3})]),_:3})],4)],2)])}var W=$(E,[["render",j],["__scopeId","data-v-b436fa56"]]);export{J as T,W as a};
