import{a as M,f as U,d as N}from"./index.6eaed4c3.js";import{T as C,a as G}from"./layout.8d15189f.js";import{K as j,h as c,r as s,o as p,p as v,w as l,b as t,c as E,L as K,M as q,a as u,t as i,q as z,e as f,N as F}from"./index.0b2e016e.js";const O=f("\u67E5\u8BE2"),Q=f("\u91CD\u7F6E"),$=f("\u6279\u91CF\u5220\u9664"),A=f("\u6B63\u5E38"),H=f("\u505C\u6B62"),J={name:"Server",components:{TableList:C,TableLayout:G}},ee=Object.assign(J,{setup(W){j(()=>{d(),B()});let _=null;_===null?_=setInterval(()=>{d()},5*1e3):(clearInterval(_),_=null);const n=c({pageNum:1,pageSize:10,sort:"",serverIaddr:"",serverGroup:""});function T(){n.value.pageNum=1,d()}function x(){n.value={pageNum:1,pageSize:10,sort:"",serverIaddr:"",serverGroup:""}}const w=c(null),g=c(!1),y=c([]),b=c(0);function d(){g.value=!0,M(n.value).then(a=>{y.value=a.data.list,b.value=a.data.total,setTimeout(()=>{g.value=!1},1.5*1e3)})}const k=c([]);function B(){U().then(a=>{k.value=a.data})}function I(a){F.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(a&&a.lid)N(a.lid).then(o=>{d()});else{const o=w.value.getSelectedRowKeys();N(o.join(",")).then(S=>{d()})}})}return(a,o)=>{const S=s("el-input"),h=s("el-form-item"),R=s("el-option"),D=s("el-select"),m=s("el-button"),P=s("el-form"),r=s("el-table-column"),L=s("el-link");return p(),v(G,{title:"\u8F6C\u7801\u670D\u52A1\u5217\u8868"},{form:l(()=>[t(P,{model:n.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:l(()=>[t(h,{label:"IP\u5730\u5740"},{default:l(()=>[t(S,{modelValue:n.value.serverIaddr,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value.serverIaddr=e),placeholder:"\u8BF7\u8F93\u5165IP\u5730\u5740"},null,8,["modelValue"])]),_:1}),t(h,{label:"\u8F6C\u7801\u7EC4"},{default:l(()=>[t(D,{modelValue:n.value.serverGroup,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value.serverGroup=e),placeholder:"\u8BF7\u9009\u62E9\u8F6C\u7801\u7EC4"},{default:l(()=>[(p(!0),E(q,null,K(k.value,(e,V)=>(p(),v(R,{key:V,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(h,null,{default:l(()=>[t(m,{type:"primary",icon:a.useRenderIcon("search"),onClick:T},{default:l(()=>[O]),_:1},8,["icon"]),t(m,{type:"primary",icon:a.useRenderIcon("refresh-left"),onClick:x},{default:l(()=>[Q]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:l(()=>[t(m,{type:"warning",icon:a.useRenderIcon("delete"),onClick:I},{default:l(()=>[$]),_:1},8,["icon"])]),table:l(()=>[t(C,{ref_key:"tableListDom",ref:w,data:y.value,loading:g.value,"show-selection":!0,"show-page":b.value>0,"page-total":b.value,"page-num":n.value.pageNum,"onUpdate:page-num":o[2]||(o[2]=e=>n.value.pageNum=e),"page-size":n.value.pageSize,"onUpdate:page-size":o[3]||(o[3]=e=>n.value.pageSize=e),onPagination:d},{default:l(()=>[t(r,{label:"IP\u5730\u5740",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverIaddr),1)]),_:1}),t(r,{label:"\u8F6C\u7801\u7EC4",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverGroup),1)]),_:1}),t(r,{label:"\u961F\u5217(\u603B:\u7A7A:\u5FD9)",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverMaxthread),1)]),_:1}),t(r,{label:"\u670D\u52A1\u72B6\u6001",align:"center"},{default:l(e=>[e.row.serverStatus==="1"?(p(),v(L,{key:0,type:"success",underline:!1},{default:l(()=>[A]),_:1})):z("",!0),e.row.serverStatus==="0"?(p(),v(L,{key:1,type:"info",underline:!1},{default:l(()=>[H]),_:1})):z("",!0)]),_:1}),t(r,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverLastupdatetime),1)]),_:1}),t(r,{label:"\u7A0B\u5E8F\u8DEF\u5F84",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverPath),1)]),_:1}),t(r,{label:"\u4EFB\u52A1\u6570",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverTaskcount),1)]),_:1}),t(r,{label:"\u7248\u672C",align:"center"},{default:l(e=>[u("span",null,i(e.row.serverVersion),1)]),_:1}),t(r,{label:"\u6587\u4EF6\u7CFB\u7EDF",align:"center",width:"230"},{default:l(e=>[u("span",null,i(e.row.serverDevstatus),1)]),_:1}),t(r,{label:"\u64CD\u4F5C",align:"center",width:"160",fixed:"right"},{default:l(e=>[t(m,{type:"warning",size:"small",circle:"",icon:a.useRenderIcon("delete"),onClick:V=>I(e.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"])]),_:1})}}});export{ee as default};
