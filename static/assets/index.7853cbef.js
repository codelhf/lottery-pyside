import{f as U,d as w,a as E,c as M,b as j,u as K}from"./index.8aea290b.js";import{T as N,a as R}from"./layout.4cd61cc3.js";import{K as $,h as s,r as c,o as q,p as O,w as t,b as a,a as z,t as P,e as p,N as Q,E as A}from"./index.d764b3ff.js";const G=p("\u67E5\u8BE2"),H=p("\u91CD\u7F6E"),J=p("\u65B0\u589E\u4E00\u7EA7\u5206\u7C7B"),W=p("\u6279\u91CF\u5220\u9664"),X={class:"dialog-footer"},Y=p("\u53D6\u6D88"),Z=p("\u786E\u5B9A"),ee={name:"CategoryFirst",components:{TableList:N,TableLayout:R}},ne=Object.assign(ee,{setup(te){$(()=>{r()});const i=s({pageNum:1,pageSize:10,sort:"",category:""});function S(){i.value.pageNum=1,r()}function B(){i.value={pageNum:1,pageSize:10,sort:"",category:""}}const y=s(null),f=s(!1),h=s([]),m=s(0);function r(){f.value=!0,U(i.value).then(e=>{h.value=e.data.list,m.value=e.data.total,setTimeout(()=>{f.value=!1},1.5*1e3)})}function b(e){Q.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(e&&e.id)w(e.id).then(l=>{r()});else{const l=y.value.getSelectedRowKeys();w(l.join(",")).then(_=>{r()})}})}const d=s(!1),n=s({id:"",category:""}),L=s({category:[{required:!0,message:"\u5206\u7C7B\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function C(e){n.value={},d.value=!0,e&&e.id&&E(e.id).then(l=>{n.value=l.data})}function T(){n.value.category&&M(n.value).then(e=>{e.data&&A.error("\u4E00\u7EA7\u5206\u7C7B\u5DF2\u5B58\u5728")})}const g=s(null);function k(){g.value.resetFields(),d.value=!1,n.value={}}function x(){g.value.validate(e=>{e&&(n.value.id?K(n.value).then(l=>{d.value=!1,r()}):j(n.value).then(l=>{d.value=!1,r()}))})}return(e,l)=>{const _=c("el-input"),v=c("el-form-item"),u=c("el-button"),F=c("el-form"),V=c("el-table-column"),I=c("el-dialog");return q(),O(R,{title:"\u4E00\u7EA7\u5206\u7C7B\u5217\u8868"},{form:t(()=>[a(F,{model:i.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:t(()=>[a(v,{label:"\u5206\u7C7B\u540D\u79F0"},{default:t(()=>[a(_,{modelValue:i.value.category,"onUpdate:modelValue":l[0]||(l[0]=o=>i.value.category=o),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a(v,null,{default:t(()=>[a(u,{type:"primary",icon:e.useRenderIcon("search"),onClick:S},{default:t(()=>[G]),_:1},8,["icon"]),a(u,{type:"primary",icon:e.useRenderIcon("refresh-left"),onClick:B},{default:t(()=>[H]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:t(()=>[a(u,{type:"primary",icon:e.useRenderIcon("plus"),onClick:C},{default:t(()=>[J]),_:1},8,["icon"]),a(u,{type:"warning",icon:e.useRenderIcon("delete"),onClick:b},{default:t(()=>[W]),_:1},8,["icon"])]),table:t(()=>[a(N,{ref_key:"tableListDom",ref:y,data:h.value,loading:f.value,"show-selection":!0,"show-page":m.value>0,"page-total":m.value,"page-num":i.value.pageNum,"onUpdate:page-num":l[1]||(l[1]=o=>i.value.pageNum=o),"page-size":i.value.pageSize,"onUpdate:page-size":l[2]||(l[2]=o=>i.value.pageSize=o),onPagination:r},{default:t(()=>[a(V,{label:"\u5206\u7C7B\u540D\u79F0",align:"center"},{default:t(o=>[z("span",null,P(o.row.category),1)]),_:1}),a(V,{label:"\u64CD\u4F5C",align:"center",width:"160",fixed:"right"},{default:t(o=>[a(u,{type:"primary",size:"small",circle:"",icon:e.useRenderIcon("edit"),onClick:D=>C(o.row),title:"\u7F16\u8F91"},null,8,["icon","onClick"]),a(u,{type:"warning",size:"small",circle:"",icon:e.useRenderIcon("delete"),onClick:D=>b(o.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"]),a(I,{title:n.value.id?"\u4FEE\u6539\u4E00\u7EA7\u5206\u7C7B":"\u65B0\u589E\u4E00\u7EA7\u5206\u7C7B",modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=o=>d.value=o),onClose:k},{footer:t(()=>[z("span",X,[a(u,{onClick:k},{default:t(()=>[Y]),_:1}),a(u,{type:"primary",onClick:x},{default:t(()=>[Z]),_:1})])]),default:t(()=>[a(F,{ref_key:"dialogForm",ref:g,model:n.value,rules:L.value,"label-width":"120px","label-suffix":":"},{default:t(()=>[a(v,{label:"\u5206\u7C7B\u540D\u79F0",prop:"category"},{default:t(()=>[a(_,{modelValue:n.value.category,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.category=o),placeholder:"\u8BF7\u8F93\u5165",onBlur:T},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})}}});export{ne as default};
