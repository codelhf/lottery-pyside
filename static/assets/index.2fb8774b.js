import{D as _,K as A,h as i,r as s,o as v,p as V,w as l,b as t,c as B,L as U,M as x,a as D,t as Q,e as m,N as H}from"./index.e7cb72d6.js";import{e as J}from"./index.59aa900d.js";import{T as O,a as P}from"./layout.42811972.js";function W(u){return _({url:"/categorySecond",method:"GET",params:u})}function X(u){return _({url:"/categorySecond/"+u,method:"GET"})}function Y(u){return _({url:"/categorySecond",method:"POST",data:u})}function Z(u){return _({url:"/categorySecond/"+u.id,method:"POST",data:u})}function E(u){return _({url:"/categorySecond/delete/"+u,method:"POST"})}const ee=m("\u67E5\u8BE2"),le=m("\u91CD\u7F6E"),te=m("\u65B0\u589E\u4E8C\u7EA7\u5206\u7C7B"),ae=m("\u6279\u91CF\u5220\u9664"),oe={class:"dialog-footer"},ne=m("\u53D6\u6D88"),ue=m("\u786E\u5B9A"),re={name:"CategorySecond",components:{TableList:O,TableLayout:P}},ce=Object.assign(re,{setup(u){A(()=>{c(),j()});const n=i({pageNum:1,pageSize:10,sort:"",parentId:"",parentName:"",category:""});function q(){n.value.pageNum=1,c()}function M(){n.value={pageNum:1,pageSize:10,sort:"",parentId:"",parentName:"",category:""}}const k=i(null),y=i(!1),I=i([]),h=i(0);function c(){y.value=!0,W(n.value).then(a=>{I.value=a.data.list,h.value=a.data.total,setTimeout(()=>{y.value=!1},1.5*1e3)})}const b=i([]);function j(){J().then(a=>{b.value=a.data})}function N(a){H.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(a&&a.id)E(a.id).then(o=>{c()});else{const o=k.value.getSelectedRowKeys();E(o.join(",")).then(C=>{c()})}})}const p=i(!1),r=i({id:"",parentId:"",category:""}),G=i({id:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],category:[{required:!0,message:"\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function T(a){r.value={},p.value=!0,a&&a.id&&X(a.id).then(o=>{r.value=o.data,r.value.parentName=n.value.parentName})}const S=i(null);function w(){S.value.resetFields(),p.value=!1,r.value={}}function K(){S.value.validate(a=>{a&&(r.value.id?Z(r.value).then(o=>{p.value=!1,c()}):Y(r.value).then(o=>{p.value=!1,c()}))})}return(a,o)=>{const C=s("el-option"),L=s("el-select"),g=s("el-form-item"),z=s("el-input"),d=s("el-button"),F=s("el-form"),R=s("el-table-column"),$=s("el-dialog");return v(),V(P,{title:"\u4E8C\u7EA7\u5206\u7C7B\u5217\u8868"},{form:l(()=>[t(F,{model:n.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:l(()=>[t(g,{label:"\u4E00\u7EA7\u5206\u7C7B"},{default:l(()=>[t(L,{modelValue:n.value.parentId,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value.parentId=e),placeholder:"\u8BF7\u8F93\u5165\u4E00\u7EA7\u5206\u7C7B"},{default:l(()=>[(v(!0),B(x,null,U(b.value,(e,f)=>(v(),V(C,{key:f,label:e.category,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"\u5206\u7C7B\u540D\u79F0"},{default:l(()=>[t(z,{modelValue:n.value.category,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value.category=e),placeholder:"\u8BF7\u8F93\u5165\u5206\u7C7B\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(g,null,{default:l(()=>[t(d,{type:"primary",icon:a.useRenderIcon("search"),onClick:q},{default:l(()=>[ee]),_:1},8,["icon"]),t(d,{type:"primary",icon:a.useRenderIcon("refresh-left"),onClick:M},{default:l(()=>[le]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:l(()=>[t(d,{type:"primary",icon:a.useRenderIcon("plus"),onClick:T},{default:l(()=>[te]),_:1},8,["icon"]),t(d,{type:"warning",icon:a.useRenderIcon("delete"),onClick:N},{default:l(()=>[ae]),_:1},8,["icon"])]),table:l(()=>[t(O,{ref_key:"tableListDom",ref:k,data:I.value,loading:y.value,"show-selection":!0,"show-page":h.value>0,"page-total":h.value,"page-num":n.value.pageNum,"onUpdate:page-num":o[2]||(o[2]=e=>n.value.pageNum=e),"page-size":n.value.pageSize,"onUpdate:page-size":o[3]||(o[3]=e=>n.value.pageSize=e),onPagination:c},{default:l(()=>[t(R,{label:"\u5206\u7C7B\u540D\u79F0",align:"center"},{default:l(e=>[D("span",null,Q(e.row.category),1)]),_:1}),t(R,{label:"\u64CD\u4F5C",align:"center",width:"160",fixed:"right"},{default:l(e=>[t(d,{type:"primary",size:"small",circle:"",icon:a.useRenderIcon("edit"),onClick:f=>T(e.row),title:"\u7F16\u8F91"},null,8,["icon","onClick"]),t(d,{type:"warning",size:"small",circle:"",icon:a.useRenderIcon("delete"),onClick:f=>N(e.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"]),t($,{title:r.value.id?"\u4FEE\u6539\u4E8C\u7EA7\u5206\u7C7B":"\u65B0\u589E\u4E8C\u7EA7\u5206\u7C7B",modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),onClose:w},{footer:l(()=>[D("span",oe,[t(d,{onClick:w},{default:l(()=>[ne]),_:1}),t(d,{type:"primary",onClick:K},{default:l(()=>[ue]),_:1})])]),default:l(()=>[t(F,{ref_key:"dialogForm",ref:S,model:r.value,rules:G.value,"label-width":"120px","label-suffix":":"},{default:l(()=>[t(g,{label:"\u4E00\u7EA7\u5206\u7C7B",prop:"parentId"},{default:l(()=>[t(L,{modelValue:n.value.parentId,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.parentId=e),placeholder:"\u8BF7\u8F93\u5165\u4E00\u7EA7\u5206\u7C7B"},{default:l(()=>[(v(!0),B(x,null,U(b.value,(e,f)=>(v(),V(C,{key:f,label:e.category,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"\u5206\u7C7B\u540D\u79F0",prop:"category"},{default:l(()=>[t(z,{modelValue:r.value.category,"onUpdate:modelValue":o[5]||(o[5]=e=>r.value.category=e),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})}}});export{ce as default};
