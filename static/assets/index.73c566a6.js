import{D as v,K as q,h as _,r as s,o as f,p as c,w as t,b as l,c as x,L as N,M as Y,a as i,t as o,e as g,N as D}from"./index.0b2e016e.js";import{T as G,a as E}from"./layout.8d15189f.js";function A(d){return v({url:"/record",method:"GET",params:d})}function J(d){return v({url:"/record/reset",method:"POST",params:d})}function W(d){return v({url:"/record/stop",method:"POST",params:d})}function M(d){return v({url:"/record/delete/"+d,method:"POST"})}function X(d){return v({url:"/record/users",method:"GET",params:d})}function Z(d){return v({url:"/record/status",method:"GET",params:d})}const ee=g("\u67E5\u8BE2"),le=g("\u91CD\u7F6E"),te=g(" - "),ae={name:"Record",components:{TableList:G,TableLayout:E}},oe=Object.assign(ae,{setup(d){q(()=>{m(),P(),$()});let y=null;y===null?y=setInterval(()=>{m()},5*1e3):(clearInterval(y),y=null);const n=_({pageNum:1,pageSize:10,sort:"",startTime:"",endTime:"",username:"",ffStatus:"",uploadfile:"",uuid:"",strategy:"",column:""});function H(){n.value.pageNum=1,m()}function O(){n.value={pageNum:1,pageSize:10,sort:"",startTime:"",endTime:"",username:"",ffStatus:"",uploadfile:"",uuid:"",strategy:"",column:""}}const R=_([]);function P(){X().then(u=>{R.value=u.data})}const L=_([]);function $(){Z().then(u=>{L.value=u.data})}const B=_(null),V=_(!1),I=_([]),k=_(0);function m(){V.value=!0,A(n.value).then(u=>{I.value=u.data.list,k.value=u.data.total,setTimeout(()=>{V.value=!1},1.5*1e3)})}function j(u){D.confirm("\u786E\u5B9A\u8981\u91CD\u7F6E\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{u&&u.uplistid&&J({uplistid:u.uplistid}).then(a=>{m()})})}function K(u){D.confirm("\u786E\u5B9A\u8981\u7EC8\u6B62\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{u&&u.uplistid&&W({uplistid:u.uplistid}).then(a=>{m()})})}function F(u){D.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(u&&u.uplistid)M(u.uplistid).then(a=>{m()});else{const a=B.value.getSelectedRowKeys();M(a.join(",")).then(T=>{m()})}})}return(u,a)=>{const T=s("el-date-picker"),p=s("el-form-item"),z=s("el-option"),C=s("el-select"),U=s("el-row"),S=s("el-input"),b=s("el-button"),Q=s("el-form"),r=s("el-table-column"),h=s("el-link");return f(),c(E,{title:"\u4E0A\u4F20\u8BB0\u5F55\u5217\u8868"},{form:t(()=>[l(Q,{model:n.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:t(()=>[l(U,null,{default:t(()=>[l(p,{label:"\u5F00\u59CB\u65F6\u95F4"},{default:t(()=>[l(T,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n.value.startTime,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value.startTime=e),placeholder:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),l(p,{label:"\u7ED3\u675F\u65F6\u95F4"},{default:t(()=>[l(T,{type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n.value.endTime,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.endTime=e),placeholder:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),l(p,{label:"\u5904\u7406\u72B6\u6001"},{default:t(()=>[l(C,{modelValue:n.value.ffStatus,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.ffStatus=e),placeholder:"\u8BF7\u9009\u62E9\u5904\u7406\u72B6\u6001",filterable:""},{default:t(()=>[(f(!0),x(Y,null,N(L.value,(e,w)=>(f(),c(z,{key:w,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(U,null,{default:t(()=>[l(p,{label:"\u89C6\u9891\u540D\u79F0"},{default:t(()=>[l(S,{modelValue:n.value.uploadfile,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.uploadfile=e),placeholder:"\u8BF7\u8F93\u5165\u89C6\u9891\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(p,{label:"\u7B56\u7565\u540D\u79F0"},{default:t(()=>[l(S,{modelValue:n.value.strategy,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.strategy=e),placeholder:"\u8BF7\u8F93\u5165\u7B56\u7565\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(p,{label:"\u680F\u76EE\u5173\u952E\u8BCD"},{default:t(()=>[l(S,{modelValue:n.value.column,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.column=e),placeholder:"\u8BF7\u8F93\u5165\u680F\u76EE\u5173\u952E\u8BCD"},null,8,["modelValue"])]),_:1})]),_:1}),l(U,null,{default:t(()=>[l(p,{label:"\u7528\u6237\u540D\u79F0"},{default:t(()=>[l(C,{modelValue:n.value.username,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.username=e),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",filterable:""},{default:t(()=>[(f(!0),x(Y,null,N(R.value,(e,w)=>(f(),c(z,{key:w,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"GUID"},{default:t(()=>[l(S,{modelValue:n.value.uuid,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.uuid=e),placeholder:"\u8BF7\u8F93\u5165GUID"},null,8,["modelValue"])]),_:1}),l(p,null,{default:t(()=>[l(b,{type:"primary",icon:u.useRenderIcon("search"),onClick:H},{default:t(()=>[ee]),_:1},8,["icon"]),l(b,{type:"primary",icon:u.useRenderIcon("refresh-left"),onClick:O},{default:t(()=>[le]),_:1},8,["icon"])]),_:1})]),_:1})]),_:1},8,["model"])]),button:t(()=>[]),table:t(()=>[l(G,{ref_key:"tableListDom",ref:B,data:I.value,loading:V.value,"show-selection":!1,"show-page":k.value>0,"page-total":k.value,"page-num":n.value.pageNum,"onUpdate:page-num":a[8]||(a[8]=e=>n.value.pageNum=e),"page-size":n.value.pageSize,"onUpdate:page-size":a[9]||(a[9]=e=>n.value.pageSize=e),onPagination:m},{default:t(()=>[l(r,{label:"\u7528\u6237",align:"center"},{default:t(e=>[i("span",null,o(e.row.username),1)]),_:1}),l(r,{label:"\u6587\u4EF6",align:"center",width:"200"},{default:t(e=>[i("span",null,o(e.row.uploadfile),1)]),_:1}),l(r,{label:"GUID",align:"center",width:"200"},{default:t(e=>[i("span",null,o(e.row.uuid),1)]),_:1}),l(r,{label:"\u7B56\u7565",align:"center",width:"150"},{default:t(e=>[i("span",null,o(e.row.strategy),1)]),_:1}),l(r,{label:"\u680F\u76EE\u5173\u952E\u5B57",align:"center",width:"100"},{default:t(e=>[i("span",null,o(e.row.categorykeys),1)]),_:1}),l(r,{label:"\u65F6\u957F",align:"center",width:"110"},{default:t(e=>[i("span",null,o(e.row.duration),1)]),_:1}),l(r,{label:"\u72B6\u6001",align:"center",width:"90"},{default:t(e=>[i("span",null,o(e.row.ffStatus),1)]),_:1}),l(r,{label:"\u8FDB\u5EA6",align:"center",width:"60"},{default:t(e=>[i("span",null,o(e.row.ffRate),1)]),_:1}),l(r,{label:"\u5B8C\u6210\u8FDB\u5EA6",align:"center",width:"100"},{default:t(e=>[e.row.ffStep?e.row.ffStep==="\u5904\u7406\u6210\u529F"||e.row.ffStep==="\u6210\u529F"?(f(),c(h,{key:1,type:"success",underline:!1},{default:t(()=>[g(o(e.row.ffStep),1)]),_:2},1024)):e.row.ffStep==="\u7B49\u5F85\u5904\u7406"||e.row.ffStep==="\u7B49\u5F85\u5904\u7406"?(f(),c(h,{key:2,type:"warning",underline:!1},{default:t(()=>[g(o(e.row.ffStep),1)]),_:2},1024)):e.row.ffStep==="\u68C0\u6D4B\u4E0D\u901A\u8FC7"||e.row.ffStep==="\u5931\u8D25"||e.row.ffStep==="\u5904\u7406\u5931\u8D25"?(f(),c(h,{key:3,type:"danger",underline:!1},{default:t(()=>[g(o(e.row.ffStep),1)]),_:2},1024)):(f(),c(h,{key:4,type:"primary",underline:!1},{default:t(()=>[g(o(e.row.ffStep),1)]),_:2},1024)):(f(),c(h,{key:0,type:"info",underline:!1},{default:t(()=>[te]),_:1}))]),_:1}),l(r,{label:"\u4E0A\u4F20\u65F6\u95F4",align:"center",width:"100"},{default:t(e=>[i("span",null,o(e.row.uploadstime),1)]),_:1}),l(r,{label:"\u5904\u7406\u65F6\u95F4",align:"center",width:"100"},{default:t(e=>[i("span",null,o(e.row.trancodestarttime),1)]),_:1}),l(r,{label:"\u4E0A\u4F20ip",align:"center",width:"160"},{default:t(e=>[i("span",null,o(e.row.uploadIp),1)]),_:1}),l(r,{label:"\u5904\u7406ip",align:"center",width:"160"},{default:t(e=>[i("span",null,o(e.row.dealServerip),1)]),_:1}),l(r,{label:"\u670D\u52A1\u7EC4",align:"center",width:"80"},{default:t(e=>[i("span",null,o(e.row.servergroup),1)]),_:1}),l(r,{label:"\u5B8C\u6210\u65F6\u95F4",align:"center",width:"100"},{default:t(e=>[i("span",null,o(e.row.trancodefinishtime),1)]),_:1}),l(r,{label:"\u64CD\u4F5C",align:"center",width:"160",fixed:"right"},{default:t(e=>[l(b,{type:"primary",size:"small",circle:"",icon:u.useRenderIcon("refresh-left"),onClick:w=>j(e.row),title:"\u91CD\u7F6E"},null,8,["icon","onClick"]),l(b,{type:"danger",size:"small",circle:"",icon:u.useRenderIcon("switch-button"),onClick:w=>K(e.row),title:"\u7EC8\u6B62"},null,8,["icon","onClick"]),l(b,{type:"warning",size:"small",circle:"",icon:u.useRenderIcon("delete"),onClick:w=>F(e.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"])]),_:1})}}});export{oe as default};
