import{u as E,K as O,h as r,r as m,o as Q,p as A,w as n,b as e,a as g,t as b,e as s,L as G}from"./index.b044c83d.js";import{f as H,T,U as $,a as L,d as P,b as J,c as W,u as X}from"./index.8b31b00f.js";const Y=s("\u641C\u7D22"),Z=s("\u91CD\u7F6E"),x=s("\u65B0\u589E\u5956\u54C1"),ee=s("\u6279\u91CF\u5220\u9664"),le=s("\u8868\u683C\u6A21\u677F"),ae=s("\u4E0A\u4F20\u8868\u683C"),ne=s("\u4E0B\u8F7D\u8868\u683C"),te={class:"dialog-footer"},oe=s("\u53D6\u6D88"),ue=s("\u786E\u5B9A"),ie={name:"Prize",components:{TableList:T,TableLayout:L,UploadImage:$}},me=Object.assign(ie,{setup(re){const N=E();O(()=>{p()});const u=r({pageNum:1,pageSize:10,sort:"",username:"",prizeId:""});function S(){u.value.pageNum=1,p()}function D(){u.value={pageNum:1,pageSize:10,sort:"",username:"",prizeId:""}}const V=r(null),_=r(!1),h=r([]),y=r(0);function p(){_.value=!0,H(u.value).then(t=>{h.value=t.data.list,y.value=t.data.total,setTimeout(()=>{_.value=!1},1.5*1e3)})}function z(t){G.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u5220\u9664\u63D0\u793A",{cancelButtonText:"\u53D6\u6D88",confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{if(t&&t.id)P(t.id).then(a=>{p()});else{const a=V.value.getSelectedRowKeys();P(a.join(",")).then(v=>{p()})}})}const f=r(!1),o=r({id:"",image:"",name:"",desc:"",stock:"",number:"",operateTime:""}),F=r({name:[{required:!0,message:"\u5956\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],desc:[{required:!0,message:"\u5956\u54C1\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],stock:[{required:!0,message:"\u5956\u54C1\u6570\u91CF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],number:[{required:!0,message:"\u5956\u54C1\u987A\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]});function C(t){o.value={},f.value=!0,t&&t.id&&J(t.id).then(a=>{a.data.avatar||(a.data.image=""),o.value=a.data})}function B(t){N.push(`/user?prizeId=${t.id}`)}function q(t){o.value.image=t}const k=r(null);function w(){k.value.resetFields(),f.value=!1,o.value={}}function j(){k.value.validate(t=>{t&&(o.value.id?X(o.value).then(a=>{f.value=!1,p()}):W(o.value).then(a=>{f.value=!1,p()}))})}return(t,a)=>{const v=m("el-input"),d=m("el-form-item"),i=m("el-button"),I=m("el-form"),K=m("table-image"),c=m("el-table-column"),R=m("el-input-number"),M=m("el-dialog");return Q(),A(L,{title:"\u5956\u54C1\u5217\u8868"},{form:n(()=>[e(I,{model:u.value,inline:!0,"label-width":"120px","label-suffix":":"},{default:n(()=>[e(d,{label:"\u5956\u54C1\u540D\u79F0"},{default:n(()=>[e(v,{modelValue:u.value.name,"onUpdate:modelValue":a[0]||(a[0]=l=>u.value.name=l),placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5956\u54C1\u63CF\u8FF0"},{default:n(()=>[e(v,{modelValue:u.value.description,"onUpdate:modelValue":a[1]||(a[1]=l=>u.value.description=l),placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),e(d,null,{default:n(()=>[e(i,{type:"primary",icon:t.useRenderIcon("search"),onClick:S},{default:n(()=>[Y]),_:1},8,["icon"]),e(i,{type:"primary",icon:t.useRenderIcon("refresh-left"),onClick:D},{default:n(()=>[Z]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),button:n(()=>[e(i,{type:"primary",icon:t.useRenderIcon("plus"),onClick:a[2]||(a[2]=l=>C())},{default:n(()=>[x]),_:1},8,["icon"]),e(i,{type:"warning",icon:t.useRenderIcon("delete"),onClick:a[3]||(a[3]=l=>z())},{default:n(()=>[ee]),_:1},8,["icon"]),e(i,{type:"primary",icon:t.useRenderIcon("document"),onClick:a[4]||(a[4]=l=>t.handleDocument())},{default:n(()=>[le]),_:1},8,["icon"]),e(i,{type:"primary",icon:t.useRenderIcon("upload2"),onClick:a[5]||(a[5]=l=>t.handleUpload())},{default:n(()=>[ae]),_:1},8,["icon"]),e(i,{type:"primary",icon:t.useRenderIcon("download"),onClick:a[6]||(a[6]=l=>t.handleDownload())},{default:n(()=>[ne]),_:1},8,["icon"])]),table:n(()=>[e(T,{ref_key:"tableListDom",ref:V,data:h.value,loading:_.value,"show-selection":!0,"show-page":y.value>0,"page-total":y.value,"page-num":u.value.pageNum,"onUpdate:page-num":a[7]||(a[7]=l=>u.value.pageNum=l),"page-size":u.value.pageSize,"onUpdate:page-size":a[8]||(a[8]=l=>u.value.pageSize=l),onPagination:p},{default:n(()=>[e(c,{label:"\u5956\u54C1\u56FE\u7247",align:"center"},{default:n(l=>[e(K,{src:l.row.image},null,8,["src"])]),_:1}),e(c,{label:"\u5956\u54C1\u540D\u79F0",align:"center"},{default:n(l=>[g("span",null,b(l.row.name),1)]),_:1}),e(c,{label:"\u5956\u54C1\u63CF\u8FF0",align:"center"},{default:n(l=>[g("span",null,b(l.row.description),1)]),_:1}),e(c,{label:"\u5956\u54C1\u6570\u91CF",align:"center"},{default:n(l=>[g("span",null,b(l.row.stock),1)]),_:1}),e(c,{label:"\u5956\u54C1\u987A\u5E8F",align:"center"},{default:n(l=>[g("span",null,b(l.row.number),1)]),_:1}),e(c,{label:"\u64CD\u4F5C\u65F6\u95F4",align:"center"},{default:n(l=>[g("span",null,b(l.row.operateTime),1)]),_:1}),e(c,{label:"\u64CD\u4F5C",align:"center",width:"160"},{default:n(l=>[e(i,{type:"primary",size:"small",circle:"",icon:t.useRenderIcon("user"),onClick:U=>B(l.row),title:"\u4E2D\u5956\u4EBA\u5458"},null,8,["icon","onClick"]),e(i,{type:"primary",size:"small",circle:"",icon:t.useRenderIcon("edit"),onClick:U=>C(l.row),title:"\u7F16\u8F91"},null,8,["icon","onClick"]),e(i,{type:"danger",size:"small",circle:"",icon:t.useRenderIcon("delete"),onClick:U=>z(l.row),title:"\u5220\u9664"},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data","loading","show-page","page-total","page-num","page-size"]),e(M,{title:o.value.id?"\u4FEE\u6539\u5956\u54C1":"\u65B0\u589E\u5956\u54C1",modelValue:f.value,"onUpdate:modelValue":a[13]||(a[13]=l=>f.value=l),onClose:w},{footer:n(()=>[g("span",te,[e(i,{onClick:w},{default:n(()=>[oe]),_:1}),e(i,{type:"primary",onClick:j},{default:n(()=>[ue]),_:1})])]),default:n(()=>[e(I,{ref_key:"dialogForm",ref:k,model:o.value,rules:F.value,"label-width":"120px","label-suffix":":"},{default:n(()=>[e(d,{label:"\u5956\u54C1\u56FE\u7247",prop:"image"},{default:n(()=>[e($,{"image-url":o.value.image,onUploadPath:q},null,8,["image-url"])]),_:1}),e(d,{label:"\u5956\u54C1\u540D\u79F0",prop:"name"},{default:n(()=>[e(v,{modelValue:o.value.name,"onUpdate:modelValue":a[9]||(a[9]=l=>o.value.name=l),placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5956\u54C1\u63CF\u8FF0",prop:"description"},{default:n(()=>[e(v,{modelValue:o.value.description,"onUpdate:modelValue":a[10]||(a[10]=l=>o.value.description=l),placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5956\u54C1\u6570\u91CF",prop:"stock"},{default:n(()=>[e(R,{modelValue:o.value.stock,"onUpdate:modelValue":a[11]||(a[11]=l=>o.value.stock=l),min:1,placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u6570\u91CF"},null,8,["modelValue"])]),_:1}),e(d,{label:"\u5956\u54C1\u987A\u5E8F",prop:"number"},{default:n(()=>[e(R,{modelValue:o.value.number,"onUpdate:modelValue":a[12]||(a[12]=l=>o.value.number=l),min:1,placeholder:"\u8BF7\u8F93\u5165\u5956\u54C1\u987A\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])]),_:1})}}});export{me as default};
